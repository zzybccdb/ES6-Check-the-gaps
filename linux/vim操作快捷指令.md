# Vim 操作

3种模式, 一般模式, 编辑模式, 指令模式

## 常用快捷键说明 (n 为数字)
### 移动操作
- hjkl: 上下左右
- [Ctrl] + [f]: 下移一页
- [Ctrl] + [b]: 上移一页
- 0: 移动至当前行首位
- $: 移动至当前行末位
- G: 移动到最后一行
- gg: 移动到第一行
- n<Enter>: 向下移动 n 行

### 选择操作
- v: 字符选择, 将光标经过的地方反白
- V: 整行字符选择, 将光标经过的行都反白
- <ctrl> + v: 区块字符选择, 可以用长方形的方式选择
- y: 将反白的内容复制
- d: 将反白的内容删除

### 搜索操作
- /word: 向下搜索
- ?word: 向上搜索
- <n>: 重复前一个搜寻操作
- N: 反向前一个搜寻操作

### 替换操作
- :n1,n2s/word/replace/g: 在 n1 行 n2 行之间找到单词 word 替换成 replace
- :1,$s/word/replace/g: 全文搜索 word, 并且替换为 replace
- :1,$s/word/replace/gc: 全文搜索 word, 并且替换为 replace, 但是需要用户确认

### 删除操作
- x: 向后删除一位
- X: 向前删除一位
- nx: 向后连续删除 n 个
- dd: 删除当前行, 并将当前行暂存至剪贴板
- ndd: 删除光标所在的向下 n 行
- d1G: 删除光标所在位置到第一行的所有行
- dG: 删除光标所在位置到最后一行的所有内容
- d$: 删除光标所在位置到行尾的所有内容
- d0: 删除光标所在位置之前的行头的所有内容

### 复制操作
- yy: 复制当前行
- nyy: 复制光标所在的向下 n 行
- y1G: 复制光标所在位置到第一行的所有行
- yG: 复制光标所在位置到最后一行的所有内容
- y$: 复制光标所在位置到行尾的所有内容
- y0: 复制光标所在位置之前的行头的所有内容

### 粘贴操作
- p: 向下粘贴
- P: 向上粘贴
- J: 将光标所在行与下一行合并为一行
- u: 复原上一个动作
- <ctrl> + r: 重做上一个动作
- . : 重做上一个动作

## 进入编辑模式
- i, I: 在目前光标处插入, I 在目前所在行的第一个非空处插入
- a, A: 在光标所在字符后插入, A 在所在行的最后一个字符插入
- o, O: 在光标所在下一行插入新一行, O 在光标所在上一行插入新一行
- r, R: r 取代当前光标位置一次, R 会一直取代光标所在的文字,光标向下移动，直到按下 ESC 为止；

## 多文本编辑
- :n <filename> : 编辑下一个文件
- :N: 编辑上一个文件
- :files :列出所有 vim 打开的文件

## 多窗口编辑
- :sp <filename> : 开启编辑新窗口
- :<ctrl> + w + 方向 : 窗口选择移动
- :q: 选中窗口关闭

## 储存离开
- :w  : 将编辑的数据写入硬盘中
- :w!  : 强制写入, 前提是用户权限够
- :q  : 离开 vim
- :q!  : 强制离开不储存文件
- :wq  : 储存后离开 :wq! 强制储存后离开
- ZZ : 若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！
- :w [filename] : 将编辑的数据储存成另一个档案（类似另存新档）
- :r [filename] : 在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 这个档案内容加到游标所在行后面
- :n1,n2 w [filename] : 将 n1 到 n2 的内容储存成 filename 这个档案。
- :! command  : 暂时离开 vi 到指令列模式下执行 command 的显示结果！例如『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的档案信息！

- :e! : 还原初始状态

## 具体功能组合快捷键
### 移动当前行至上一行
> ddkp

